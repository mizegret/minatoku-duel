# パフォーマンス予算 v0.1

目標値（初期）

- 初回レンダ（デスクトップ/10Mbps相当）: < 2.0s
- TTI（初期操作可能）: < 2.5s
- 初期 JS（gzip）: ≤ 300KB（3Dアセットは遅延）
- CSS（gzip）: ≤ 30KB
- 画像/モデル: 初回ロードに含めない（遅延）。
- FPS: 60fps 目標（1フレーム 16.6ms）
- メインスレッド: フレームあたり 8ms 以内の処理に抑制
- メモリ: 常時 200MB 以内（中級端末想定）

計測方法

- Lighthouse CI（Performance/Best Practices の追跡）。
- `performance.mark/measure` によるレンダパス計測（mark 名は別紙で定義）。
- WebGL: フレーム時間とドローカウント、テクスチャ転送量をコンソールに集約（Phase 2 以降）。

最適化の原則

- コード分割/遅延ロード（R3F/Three まわりは分割）。
- 画像/GLTF/VRM のハッシュキャッシュ、必要時のみ取得。
- バッチ/インスタンシング、テクスチャアトラス。

回帰ガード

- 予算超過は PR チェックで検知（将来、簡易スクリプト）。
- 重い 3D シーンはステージングでの手動検証を必須化。
